# 1. psutil: 系统性能信息模块

## 1.1 psutil介绍

`psutil`是一个跨平台库，能够轻松实现获取系统运行的进程和系统利用率（包括CPU、内存、磁盘、网络等）信息。它主要应用于系统监控，分析和限制系统资源及进程的管理。

它实现了同等命令行工具提供的功能，如:
* ps
* top
* lsof
* netstat
* ifconfig
* who
* df
* kill
* free
* nice
* ionice
* iostat
* iotop
* uptime
* pidof
* tty
* taskset
* pmap
* ...

psutil 文档: [https://psutil.readthedocs.io/en/latest/#id1](https://psutil.readthedocs.io/en/latest/#id1)

psutil大小单位: 一般都采用字节


## 1.2 psutil: 获取系统性能信息
### CPU信息
Linux操作系统的CPU利用率有以下4个部分：
* `User Time`: 执行用户进程的时间百分比
* `System Time`: 执行内核进程和中断的时间百分比
* `Wait IO`: 由于IO等待而使CPU处于idle（空闲）状态的时间百分比
* `Idle`: CPU处于idle状态的时间百分比

#### top: 获取CPU信息
```shell
top
```

#### psutil.cpu_times(): 获取CPU信息
使用 `cpu_times` 方法获取CPU完整信息，显示所有逻辑CPU信息:

```python
psutil.cpu_times(percpu=False)
```

**返回:**

以命名元组返回系统CPU时间。每个属性代表CPU在给定模式下花费的秒数。

**参数:**
* `percpu`: 当值为True时，返回每个逻辑CPU的信息

例如:

```shell
>>> import psutil
>>> psutil.cpu_times()
scputimes(user=10524.92, nice=0.0, system=6370.28, idle=378662.26)

>>> psutil.cpu_times(percpu=True)
[scputimes(user=2535.75, nice=0.0, system=1850.78, idle=20730.76), scputimes(user=46.94, nice=0.0, system=41.69, idle=25025.43), scputimes(user=2119.02, nice=0.0, system=1369.59, idle=21625.46), scputimes(user=45.33, nice=0.0, system=31.99, idle=25036.74), scputimes(user=1644.32, nice=0.0, system=973.57, idle=22496.17), scputimes(user=45.76, nice=0.0, system=26.75, idle=25041.55), scputimes(user=1316.4, nice=0.0, system=743.96, idle=23053.71), scputimes(user=46.51, nice=0.0, system=23.58, idle=25043.96), scputimes(user=966.03, nice=0.0, system=519.68, idle=23628.36), scputimes(user=46.8, nice=0.0, system=21.18, idle=25046.07), scputimes(user=716.75, nice=0.0, system=346.53, idle=24050.79), scputimes(user=46.55, nice=0.0, system=19.3, idle=25048.21), scputimes(user=614.19, nice=0.0, system=273.41, idle=24226.47), scputimes(user=46.58, nice=0.0, system=17.51, idle=25049.97), scputimes(user=450.49, nice=0.0, system=181.34, idle=24482.23), scputimes(user=46.01, nice=0.0, system=16.11, idle=25051.93)]
>>> 
```

### 内存信息
Linux系统的内存利用率信息主要包括:
* `total`: 内存总数
* `used`: 已使用的内存数
* `free`: 空闲内存数
* `buffers`: 缓冲使用数
* `cache`: 缓存使用数
* `swap`: 交换分区使用数

#### free -m: 获取内存信息
```shell
free -m
```

#### psutil.virtual_memory() & psutil.swap_memory(): 获取内存信息
分别使用 `psutil.virtual_memory()` 与 `psutil.swap_memory()` 方法获取这些信息

```python
# 获取内存信息
psutil.virtual_memory()

# 获取交换分区信息
psutil.swap_memory()
```

例如:

```shell
>>> psutil.virtual_memory()
svmem(total=68719476736, available=43457724416, percent=36.8, used=25257930752, free=21442801664, active=20756529152, inactive=15408390144, wired=4501401600)
>>> psutil.swap_memory()
sswap(total=0, used=0, free=0, percent=0.0, sin=12411609088, sout=0)
```
### 网络信息


### 其他系统信息

## 1.3 psutil: 获取系统进程方法
### 进程信息

### popen类的使用

### 获取物理内存
#### shell命令获取物理内存
* 查看物理内存total值


