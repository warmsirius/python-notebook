# 4. `smtplib`: 发送电子邮件模块

准备工作: 准备好配置 smtp主机地址、邮箱账号、密码等。

## 4.1 `smtplib` 模块的常用类、方法

### 1、`smtplib.SMTP`类: SMTP类
功能: 与smtp服务器建立连接，在连接成功后，就可以向服务器发送相关请求，比如登录、校验、发送、退出等。

* `host`: 远程smtp主机地址，比如smtp.163.com
* `port`: 连接端口，默认为25
* `local_hostname`: 在本地主机的FQDN（完整的域名）发送HELO/EHLO（标识用户身份）指令
* `timeout`: 连接或尝试在多少秒超时

```python
import smtplib


smtplib.SMTP([host[, port[, local_hostname[, timeout]]]])
```

### 2、`SMTP.connect`方法: 连接远程 smtp 主机方法

* `host`: 远程主机地址
* `port`: 远程主机smtp端口，默认25

```python
SMTP.connect([host[，port]])
```

### 3、`SMTP.login`方法: 校验远程smtp主机

```python
SMTP.login(user, password)
```

### 4、`SMTP.sendmail`方法: 发送邮件
* `from_addr`: 发件人
* `to_addrs`: 收件人
* `msg`: 邮件内容

```python
SMTP.sendmail(from_addr，to_addrs，msg[，mail_options，rcpt_options])
```

### 5、`SMTP.starttls`方法: 启用TLS（安全传输）模式
启用TLS（安全传输）模式，所有SMTP指令都将加密传输。

```python
SMTP.starttls([keyfile[，certfile]])
```

例如: 使用gmail 的 smtp服务时需要启动此项才能正常发送邮件，如

```python
SMTP.starttls()
 ```

### 6、`SMTP.quit`方法: 断开 smtplib连接

```python
SMTP.quit()
```







